# Taro
**Taro** – [Telegram](https://telegram.org)-бот, генерирующий карту дня, объясняющий значения карт таро для различных сфер, а также делает рассклад на картах таро на любой вопрос.

## Порядок установки и использования
1. Загрузить репозиторий. Распаковать.

2. Установить [Python](https://www.python.org/downloads/) версии 3.11 и выше. Рекомендуется добавить в PATH.

3. Открыть каталог со скриптом в консоли: можно воспользоваться командой cd или встроенными возможностями файлового менеджера.

4. Создать виртуальное окружение Python.

```
python -m venv .venv
```

5. Активировать вирутальное окружение.

#### Для Windows.
    
```shell
.venv\Scripts\activate.bat
```

#### Для Linux или MacOS.

```bash
source .venv/bin/activate
```

6. Установить зависимости скрипта.

```
pip install -r requirements.txt
```

7. Настроить бота путём редактирования _Settings.json_.

### Settings.json.

```JSON
"token": ""
```

Токен бота Telegram (можно получить у [BotFather](https://t.me/BotFather)).

```JSON
"qr_id": ""
```

Путь к изображению, который отправляется по команде /share.

```JSON
"start_id": ""
```

Путь к изображению, который отправляется по команде /start.

```JSON
"chat_id": null
```

ID пользователя, для формирования кэша изображения описанного выше (смотреть подробнее [TeleCache](https://github.com/DUB1401/dublib/blob/main/docs/TelebotUtils/Cache.md)).
Для получения ID пользователя можно воспользоваться [ботом](https://t.me/chat_id_echo_bot).


```JSON
"mailing_time": "08:00"
```

Время в которое присылается ежедневная рассылка карты дня (при её подключении пользователей).

```JSON
"subscription_chanel": null 
```

ID канала, на который должен быть подписан пользователь, для работы с ботом.
Для получения ID канала можно воспользоваться [ботом](https://t.me/chat_id_echo_bot).

```JSON
"subscription_link": ""
```

Ссылка на канал, на который должен быть подписан пользователь, для работы с ботом.

```JSON
"password": ""
```

Пароль для вызова административной панели при вызове /admin **{password}**.

```JSON
"letters": ""
```

Путь к файлу Excel, с двумя колонками: 1. Послания; 2. Призывы.

```JSON
"planning_day": "0"
```

День в который планируется рассылка на дни недели.

```JSON
"planning_time": "0:0"
```

Время в которое планируется рассылка на дни недели.

```JSON
"mailings": "05:50"
```

Время в которое планируется рассылка на день.


```JSON
"restart_mailings": true
```

Требуется ли restart функции, определяющей время рассылки и генерацию задач. Необходима, при перезапуске бота на сервере для продолжения рассылки, которая не была закончена.

```JSON
"once_mailing": false
```

Требуется ли одноразовая рассылка сообщения пользователям.

8. Добавить материалы, используемые в боте в папку Materials, со структурой показанной ниже.
<details>
<summary>Структура файлов<p></p></summary> 

```html
.
└── Materials/
    ├── Layouts/
    │   ├── 1 комплект/
    │   │   ├── 1.jpg <!-- Изображение трёх закрытых карт, далее карты поочерёдно открываются в следующих изображениях -->
    │   │   ├── ...
    │   │   ├── 4.jpg
    │   │   └── cards.json <!-- Список из названий карт, использующихся в этом комплекте -->
    │   ├── 2 комплект
    │   └── ...
    ├── Photo /
    │   ├── 18.01.2025.jpg <!-- Карта дня -->
    │   ├── 19.01.2025.jpg
    │   └── ...
    ├── Text /
    │   ├── 18.01.2025.txt <!-- Текст карты дня -->
    │   ├── 19.01.2025.txt
    │   └── ...
    └── Values/
        ├── Arcanas/
        │   ├── 0. Шут/
        │   │   ├── 1.txt <!--Текст общее значение для карты шута -->
        │   │   ├── 2.txt <!--Текст личностное состояние для карты шута -->
        │   │   ├── 3.txt <!--Текст на глубоком уровне для карты шута -->
        │   │   ├── 4.txt <!--Текст в работе и карьере для карты шута -->
        │   │   ├── 5.txt <!--Текст в финансах для карты шута -->
        │   │   ├── 6.txt <!--Текст в любовной сфере для карты шута -->
        │   │   ├── 7.txt <!--Текст состояние здоровья для карты шута -->
        │   │   ├── 8.txt <!--Текст перевернутая карта для карты шута -->
        │   │   └── image.jpg <!-- Карта шута -->
        │   ├── I. Маг/
        │   │   └── ...
        │   ├── II. Жрица
        │   ├── III. Императрица
        │   ├── IV. Император
        │   ├── IX. Отшельник
        │   ├── V. Жрец
        │   ├── VI. Влюбленные
        │   ├── VII. Колесница
        │   ├── VIII. Справедливость
        │   ├── X. Фортуна
        │   ├── XI. Сила
        │   ├── XII. Повешенный
        │   ├── XIII. Смерть
        │   ├── XIV. Умеренность
        │   ├── XIX. Солнце
        │   ├── XV. Дьявол
        │   ├── XVI. Башня
        │   ├── XVII. Звезда
        │   ├── XVIII. Луна
        │   ├── XX. Суд
        │   └── XXI. Мир
        ├── Cups/
        │   ├── 1. Туз кубков/
        │   │   ├── 1.txt
        │   │   ├── ...
        │   │   ├── 8.txt
        │   │   └── image.jpg
        │   ├── 2. Двойка кубков/
        │   │   └── ...
        │   ├── ...
        │   ├── 10. Десятка кубков
        │   ├── 11. Паж кубков
        │   ├── 12. Рыцарь кубков
        │   ├── 13. Королева кубков
        │   └── 14. Король кубков
        ├── Pentacles/
        │   ├── 1. Туз пентаклей/
        │   │   ├── 1.txt
        │   │   ├── ...
        │   │   ├── 8.txt
        │   │   └── image.jpg
        │   ├── 2. Двойка пентаклей/
        │   │   └── ...
        │   ├── ...
        │   ├── 10. Десятка пентаклей
        │   ├── ...
        │   └── 14. Король пентаклей
        ├── Swords/
        │   ├── 1. Туз мечей/
        │   │   ├── 1.txt
        │   │   ├── ...
        │   │   ├── 8.txt
        │   │   └── image.jpg
        │   ├── 2. Двойка мечей/
        │   │   └── ...
        │   ├── ...
        │   ├── 10. Десятка мечей
        │   ├── ...
        │   └── 14. Король мечей
        └── Wands/
            ├── 1. Туз жезлов/
            │   ├── 1.txt
            │   ├── ...
            │   ├── 8.txt
            │   └── image.jpg
            ├── 2. Двойка жезлов/
            │   └── ...
            ├── ...
            ├── 10. Десятка жезлов
            ├── ...
            └── 14. Король жезлов
```
</details>

9. Для удобства работы с ботом рекомендуется добавить список команд в настройках бота в BotFather.
   
start - start working.

mailset - setting up the distribution of the map of the day.

share - share bot with friends.

10. Запустить файл _main.py_.

```
python main.py
```

11. Для автоматического запуска рекомендуется провести инициализацию сервиса через [systemd](systemd/README.md) на Linux или путём добавления его в автозагрузку на Windows.

12. Перейти в чат с ботом, токен которого указан в настройках, и следовать его инструкциям.

---
**_Copyright © Dub Irina. 2024-2025._**
